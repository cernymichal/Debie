@model Product
@{
  ViewData["Header"] = Model.Name;
  ViewData["Title"] = ViewData["Header"];
  ViewData["Crumbs"] = new Crumb[] {
    new Crumb("Product", "List", "Products"),
    new Crumb("Product", "List", Model.Name, new Dictionary<string, string> { {"ID", Model.ID.ToString() } })
  };
}

@section Head {
  <link rel="stylesheet" href="/css/product-detail.css">
}

<div class="row justify-content-between mt-5">
  <div class="productInfo col-lg-5 p-4 w-100">
    <div>
      <h1>@Model.Name</h1>
      <div>
        @if (Model.ReviewsCount != 0) {
          <div class="pe-4 d-inline-block">
            @for (int i = 0; i < (int) Model.ReviewsAvg; i++)
            {
              <i class="fa-fw fas fa-star"></i>
            }
          </div>
          <span>@Model.ReviewsAvg.ToString("0.0")</span>
        }
      </div>
      <h2 class="accent ">$@Model.Price.ToString("0.00")</h2>
      <div>
        Availability:&nbsp;<span class="accent">@(Model.Stock > 0 ? "In Stock" : "Not available")</span>
      </div>
      
    </div>
    <hr />
    <p>@Model.Description</p>
    <hr />
    <form asp-action="AddToOrder" class="row align-items-center">
      <input type="number" name="id"  value=@Model.ID hidden />
      <input type="checkbox" name="redirect" hidden />

      <label for="count" class="col-2">Qty:</label>
      <input type="number" name="count" class="form-control col-2" value=1 />
      <div class="col-8">
        <button type="submit" class="btn my-button">Add to cart</button>
      </div>
    </form>
    <form asp-action="AddToOrder" class="mt-3">
      <input type="number" name="id"  value=@Model.ID hidden />
      <input type="number" name="count" value=1 hidden />
      <input type="checkbox" name="redirect" checked hidden />
      <button type="submit" class="btn my-button btn-block">Buy now</button>
    </form>
    <hr />
    <div>
      <h6>SHARE THIS PRODUCT:</h6>
      <div>
        <i class="fab fa-facebook-f fa-border p-2"></i>
        <i class="fab fa-twitter fa-border p-2"></i>
      </div>
      <h6>GUARANTEED CHECKOUT:</h6>
      <div class="mb-1 ">
        <i class="fab fa-cc-visa fa-border p-2"></i>
        <i class="fab fa-cc-mastercard fa-border p-2"></i>
        <i class="fab fa-paypal fa-border p-2"></i>
        <i class="fab fa-apple-pay fa-border p-2"></i>
        <i class="fab fa-google-pay fa-border p-2"></i>
      </div>
    </div>
  </div>

  <div id="ProductImageCarousel" class="carousel slide col-lg-6" data-ride="carousel">
    <div>
      <div class="carousel-inner">
        @foreach (ProductImage productImage in Model.ProductImages)
        {
          if (productImage.ID == Model.MainProductImage.ID)
          {
            <div class="carousel-item active">
              <img class="d-block w-100" src=@Url.Action("Get", "Image", new { productImage.Image.ID })
                alt=@productImage.Image.Title>
            </div>
          }
          else
          {
            <div class="carousel-item">
              <img class="d-block w-100" src=@Url.Action("Get", "Image", new { productImage.Image.ID })
                alt=@productImage.Image.Title>
            </div>
          }
        }
        <a class="carousel-control-prev" href="#ProductImageCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#ProductImageCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      
    </div>
    <hr />
    <div class="productImagesIcons productImageItem">
      @for (int i = 0; i < Model.ProductImages.Count; i++)
      {
        if (Model.ProductImages[i].ID == Model.MainProductImage.ID)
        {
          <img src=@Url.Action("Get", "Image", new { Model.ProductImages[i].Image.ID})
            data-target="#ProductImageCarousel" data-slide-to=@i class="active" />
        }
        else
        {
          <img src=@Url.Action("Get", "Image", new { Model.ProductImages[i].Image.ID})
            data-target="#ProductImageCarousel" data-slide-to=@i />
        }
      }
    </div>
  </div>
</div>

<div class="mt-4">
  <nav>
    <div class="nav nav-tabs" id="nav-tab" role="tablist">
      <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
        aria-controls="nav-home" aria-selected="true">Description</a>
      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
        aria-controls="nav-profile" aria-selected="false">Shipping Policy</a>
    </div>
  </nav>
  <div>
    <div class="mt-1 fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
      @Model.Description
    </div>
    <div class="mt-1 fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">Lorem ipsum dolor sit
      amet consectetur adipisicing elit. Animi molestias deserunt vel quo ratione maiores accusantium similique! Atque
      quo autem eligendi omnis iusto doloribus numquam velit rem, nemo, sapiente accusamus!
    </div>
  </div>
</div>